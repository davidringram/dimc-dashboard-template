---
import Layout from "../layouts/Layout.astro";

// Check for success flag (User just applied)
const success = Astro.url.searchParams.get("success") === "true";
---

<Layout title="David R. Ingram | Fractional CMO">
	<div
		class="min-h-screen bg-[#353c33] flex flex-col items-center justify-center p-4 relative overflow-hidden"
	>
		<div
			class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] pointer-events-none"
		>
		</div>

		<div
			class="relative z-10 w-full max-w-lg bg-[#282e26] border-t-4 border-[#ea580c] shadow-2xl rounded-sm"
		>
			<div class="bg-[#1f241d] p-8 text-center border-b border-[#353c33]">
				<h1
					class="text-3xl font-black text-white tracking-tight uppercase"
				>
					David R. Ingram
				</h1>
				<p
					class="text-[#ea580c] font-bold text-sm tracking-[0.2em] uppercase mt-1"
				>
					Fractional CMO
				</p>
			</div>

			{
				success ? (
					<div class="p-10 text-center">
						<div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-[#353c33] border-2 border-[#ea580c] mb-6">
							<svg
								xmlns="http://www.w3.org/2000/svg"
								class="h-8 w-8 text-[#ea580c]"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="3"
									d="M5 13l4 4L19 7"
								/>
							</svg>
						</div>
						<h2 class="text-2xl font-bold text-white mb-2">
							Transmission Received
						</h2>
						<p class="text-gray-400 mb-8">
							Your application has been logged in the command
							center. We will review your briefing and establish
							comms if there is a strategic fit.
						</p>
						<a
							href="/"
							class="text-[#ea580c] font-bold hover:text-white transition-colors uppercase text-sm tracking-wider"
						>
							Return to Base
						</a>
					</div>
				) : (
					/* APPLICATION FORM */
					<div class="p-8">
						<p class="text-gray-400 text-sm mb-6 text-center italic">
							Accepting select clients for 2026. <br />
							Apply below for a strategic consultation.
						</p>

						<form
							action="/api/submit_interest"
							method="post"
							class="space-y-5"
						>
							<div class="grid grid-cols-2 gap-4">
								<div>
									<label class="block text-xs font-bold text-[#6b7280] uppercase tracking-wider mb-1">
										Full Name
									</label>
									<input
										type="text"
										name="name"
										required
										class="w-full bg-[#1f241d] border border-[#353c33] text-white font-mono text-sm p-2 rounded-sm focus:border-[#ea580c] outline-none placeholder:text-gray-600/50 placeholder:italic"
										placeholder="John Doe"
									/>
								</div>
								<div>
									<label class="block text-xs font-bold text-[#6b7280] uppercase tracking-wider mb-1">
										Geo Location
									</label>
									<input
										type="text"
										name="company"
										required
										class="w-full bg-[#1f241d] border border-[#353c33] text-white font-mono text-sm p-2 rounded-sm focus:border-[#ea580c] outline-none placeholder:text-gray-600/50 placeholder:italic"
										placeholder="Riverside, CA"
									/>
								</div>
							</div>

							<div class="grid grid-cols-2 gap-4">
								<div>
									<label class="block text-xs font-bold text-[#6b7280] uppercase tracking-wider mb-1">
										Email
									</label>
									<input
										type="email"
										name="email"
										required
										class="w-full bg-[#1f241d] border border-[#353c33] text-white font-mono text-sm p-2 rounded-sm focus:border-[#ea580c] outline-none placeholder:text-gray-600/50 placeholder:italic"
										placeholder="john@acme.com"
									/>
								</div>
								<div>
									<label class="block text-xs font-bold text-[#6b7280] uppercase tracking-wider mb-1">
										Phone
									</label>
									<input
										type="tel"
										name="phone"
										class="w-full bg-[#1f241d] border border-[#353c33] text-white font-mono text-sm p-2 rounded-sm focus:border-[#ea580c] outline-none placeholder:text-gray-600/50 placeholder:italic"
										placeholder="(555) 123-4567"
									/>
								</div>
							</div>

							<div>
								<label class="block text-xs font-bold text-[#6b7280] uppercase tracking-wider mb-1">
									Mission / Project Brief
								</label>
								<textarea
									name="details"
									rows="3"
									class="w-full bg-[#1f241d] border border-[#353c33] text-white font-mono text-sm p-2 rounded-sm focus:border-[#ea580c] outline-none placeholder:text-gray-600/50 placeholder:italic"
									placeholder="Briefly describe your current marketing bottlenecks..."
								/>
							</div>

							<button
								type="submit"
								class="w-full bg-[#ea580c] hover:bg-[#c2410c] text-white font-bold py-3 uppercase tracking-widest shadow-lg transition-all transform hover:-translate-y-0.5 mt-4"
							>
								Initiate Contact
							</button>
						</form>
					</div>
				)
			}

			<div
				class="bg-[#1f241d] p-4 text-center border-t border-[#353c33] flex justify-between items-center px-8"
			>
				<span class="text-[#353c33] text-xs font-mono"
					>SECURE CHANNEL // ENCRYPTED</span
				>

				<a
					href="/login"
					class="text-[#353c33] hover:text-[#ea580c] text-xs uppercase font-bold transition-colors"
				>
					Admin Access
				</a>
			</div>
		</div>
	</div>
</Layout>
